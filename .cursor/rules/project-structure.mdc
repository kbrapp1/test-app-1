---
description: 
globs: 
alwaysApply: false
---
# Project Structure Overview

This is a **Next.js 13+ App Router** application with **Domain-Driven Design (DDD)** patterns, following enterprise-level organization.

## Key Architecture Patterns

- **Feature-Based Organization**: Code is grouped by business domain (DAM, TTS, Auth, Marketing Automation, etc.)
- **DDD in DAM Module**: âœ… **FULLY MIGRATED** - Complete DDD implementation with domain entities, repositories, use cases, and presentation layers
- **Progressive DDD Migration**: Other domains will be migrated to DDD patterns following the DAM blueprint
- **Co-located Tests**: Tests live alongside the code they test
- **Clean Architecture**: Clear separation between UI, business logic, and data layers

## Navigation Guide

### ğŸ¯ Core Business Features
```
app/(protected)/          # Protected application routes
â”œâ”€â”€ dam/                  # Digital Asset Management (âœ… DDD-migrated)
â”‚   â”œâ”€â”€ page.tsx         # Main DAM gallery page
â”‚   â”œâ”€â”€ layout.tsx       # DAM layout wrapper
â”‚   â””â”€â”€ upload/          # Asset upload page
â”œâ”€â”€ ai-playground/        # AI features (TTS, chatbot)
â”‚   â”œâ”€â”€ chatbot/         # AI chatbot interface
â”‚   â””â”€â”€ text-to-speech/  # Text-to-speech playground
â”œâ”€â”€ marketing-automation/ # CRM-like features
â”‚   â”œâ”€â”€ contacts/        # Contact management
â”‚   â”œâ”€â”€ customers/       # Customer management
â”‚   â”œâ”€â”€ leads/           # Lead tracking
â”‚   â””â”€â”€ opportunities/   # Sales opportunities
â”œâ”€â”€ settings/            # User/org settings
â”‚   â”œâ”€â”€ profile/         # User profile settings
â”‚   â”œâ”€â”€ security/        # Security settings
â”‚   â”œâ”€â”€ org-roles/       # Organization role management
â”‚   â”œâ”€â”€ email/           # Email settings
â”‚   â”œâ”€â”€ password/        # Password management
â”‚   â””â”€â”€ danger/          # Dangerous operations
â”œâ”€â”€ team/                # Team management
â”œâ”€â”€ documents/           # Document management
â”‚   â””â”€â”€ notes/           # Note-taking system (âœ… Dynamic rendering fixed)
â”œâ”€â”€ playbooks/           # Business playbooks
â”‚   â””â”€â”€ jobs/            # Playbook jobs
â”œâ”€â”€ reporting/           # Analytics and reporting
â”œâ”€â”€ integrations/        # Third-party integrations
â”œâ”€â”€ notifications/       # Notification center
â”œâ”€â”€ approvals/           # Approval workflows
â”œâ”€â”€ brand-guidelines/    # Brand management
â”œâ”€â”€ campaign-management/ # Marketing campaigns
â”œâ”€â”€ content-calendar/    # Content planning
â”œâ”€â”€ developer-api/       # API documentation
â”œâ”€â”€ digital-storefront/  # Digital storefront
â”‚   â””â”€â”€ assets-overview/ # Asset overview
â”œâ”€â”€ insights/            # Business insights
â”œâ”€â”€ activity-feed/       # Activity tracking
â””â”€â”€ templates/           # Template management
```

### ğŸ§© Reusable Components (Legacy - Being Phased Out)
```
components/
â”œâ”€â”€ ui/                  # Base UI components (shadcn/ui)
â”œâ”€â”€ tts/                 # Text-to-speech components
â”œâ”€â”€ auth/                # Authentication forms
â”œâ”€â”€ team/                # Team management components
â”œâ”€â”€ settings/            # Settings page components
â”œâ”€â”€ forms/               # Reusable form components
â”‚   â””â”€â”€ fields/          # Form field components
â”œâ”€â”€ notes/               # Note-taking components
â”œâ”€â”€ providers/           # React context providers
â””â”€â”€ error/               # Error handling components

# NOTE: DAM components have been migrated to lib/dam/presentation/
# Legacy components/dam/ folder has been removed
```

### âš¡ Business Logic Layer
```
lib/
â”œâ”€â”€ actions/             # Server actions (Next.js) - Non-DAM domains
â”‚   â”œâ”€â”€ members.ts       # Member management actions
â”‚   â”œâ”€â”€ team.ts          # Team actions
â”‚   â””â”€â”€ tts.ts           # TTS actions
â”‚   # NOTE: DAM actions moved to lib/dam/application/actions/
â”œâ”€â”€ dam/                 # âœ… COMPLETE DDD-structured DAM domain
â”‚   â”œâ”€â”€ domain/          # Domain layer (entities, repositories, services)
â”‚   â”‚   â”œâ”€â”€ entities/    # Domain entities (Asset, Folder, Tag, etc.)
â”‚   â”‚   â”‚   â”œâ”€â”€ Asset.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ AssetFactory.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ AssetTypeChecker.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ AssetValidation.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ Folder.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ Tag.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ TagFactory.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ TagUtilities.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ TagValidation.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ SavedSearch.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ repositories/ # Repository interfaces
â”‚   â”‚   â”‚   â”œâ”€â”€ IAssetRepository.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ IAssetTagRepository.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ IFolderRepository.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ITagRepository.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ISavedSearchRepository.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ IStorageService.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ services/     # Domain services
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthContextService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchCriteriaFactory.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchMapper.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchUtilities.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchValidation.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ value-objects/ # Value objects
â”‚   â”‚       â””â”€â”€ SearchCriteria.ts
â”‚   â”œâ”€â”€ application/     # Application layer (use cases, services, DTOs)
â”‚   â”‚   â”œâ”€â”€ actions/     # Server actions (Next.js specific)
â”‚   â”‚   â”‚   â”œâ”€â”€ folder.actions.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ getAssetDownloadUrl.action.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation.actions.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ savedSearches.actions.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ textAsset.actions.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ dto/         # Data Transfer Objects
â”‚   â”‚   â”‚   â”œâ”€â”€ ApiResponseDto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ DamApiRequestDto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchCriteriaDTO.ts
â”‚   â”‚   â”‚   â””â”€â”€ UploadAssetDTO.ts
â”‚   â”‚   â”œâ”€â”€ services/    # Application services
â”‚   â”‚   â”‚   â”œâ”€â”€ AssetOperationsService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ AssetService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ AssetTagService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ DamApiDtoService.ts
â”‚   â”‚   â”‚   â””â”€â”€ FolderService.ts
â”‚   â”‚   â””â”€â”€ use-cases/   # Use cases organized by domain
â”‚   â”‚       â”œâ”€â”€ assets/  # Asset-related use cases
â”‚   â”‚       â”‚   â”œâ”€â”€ CreateTextAssetUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ DeleteAssetUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ GetAssetContentUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ GetAssetDetailsUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ GetAssetDownloadUrlUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ ListAssetsByFolderUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ ListTextAssetsUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ MoveAssetUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ RenameAssetUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ UpdateAssetMetadataUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ UpdateAssetTextUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ UploadAssetUseCase.ts
â”‚   â”‚       â”‚   â””â”€â”€ index.ts
â”‚   â”‚       â”œâ”€â”€ folders/ # Folder-related use cases
â”‚   â”‚       â”‚   â”œâ”€â”€ CreateFolderUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ DeleteFolderUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ GetFolderPathUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ ListFolderChildrenUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ ListFolderContentsUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ ListFoldersUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ MoveFolderUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ NavigateToFolderUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ UpdateFolderUseCase.ts
â”‚   â”‚       â”‚   â””â”€â”€ index.ts
â”‚   â”‚       â”œâ”€â”€ search/  # Search-related use cases
â”‚   â”‚       â”‚   â”œâ”€â”€ ExecuteSavedSearchUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ GetDamDataUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ ListSavedSearchesUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ SaveSearchUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ SearchDamItemsUseCase.ts
â”‚   â”‚       â”‚   â””â”€â”€ index.ts
â”‚   â”‚       â”œâ”€â”€ tags/    # Tag-related use cases
â”‚   â”‚       â”‚   â”œâ”€â”€ AddTagToAssetUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ CreateTagUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ DeleteTagUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ ListTagsUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ RemoveTagFromAssetUseCase.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ UpdateTagUseCase.ts
â”‚   â”‚       â”‚   â””â”€â”€ index.ts
â”‚   â”‚       â”œâ”€â”€ common/  # Common use cases
â”‚   â”‚       â”‚   â”œâ”€â”€ ParseDamApiRequestUseCase.ts
â”‚   â”‚       â”‚   â””â”€â”€ index.ts
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ infrastructure/ # Infrastructure layer (Supabase implementations)
â”‚   â”‚   â”œâ”€â”€ persistence/
â”‚   â”‚   â”‚   â””â”€â”€ supabase/
â”‚   â”‚   â”‚       â”œâ”€â”€ SupabaseAssetRepository.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ SupabaseAssetTagRepository.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ SupabaseFolderRepository.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ SupabaseSavedSearchRepository.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ SupabaseTagRepository.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ mappers/  # Data mappers
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ AssetMapper.ts
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ FolderMapper.ts
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ TagMapper.ts
â”‚   â”‚   â”‚       â””â”€â”€ services/ # Infrastructure services
â”‚   â”‚   â”‚           â”œâ”€â”€ AssetDataProcessor.ts
â”‚   â”‚   â”‚           â”œâ”€â”€ AssetDateFilter.ts
â”‚   â”‚   â”‚           â”œâ”€â”€ AssetProfileService.ts
â”‚   â”‚   â”‚           â”œâ”€â”€ AssetQueryBuilder.ts
â”‚   â”‚   â”‚           â”œâ”€â”€ AssetQueryExecutor.ts
â”‚   â”‚   â”‚           â”œâ”€â”€ AssetTagService.ts
â”‚   â”‚   â”‚           â”œâ”€â”€ AssetUrlService.ts
â”‚   â”‚   â”‚           â”œâ”€â”€ FolderDateFilter.ts
â”‚   â”‚   â”‚           â”œâ”€â”€ FolderQueryBuilder.ts
â”‚   â”‚   â”‚           â”œâ”€â”€ FolderQueryExecutor.ts
â”‚   â”‚   â”‚           â”œâ”€â”€ FolderTreeService.ts
â”‚   â”‚   â”‚           â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ storage/
â”‚   â”‚       â””â”€â”€ SupabaseStorageService.ts
â”‚   â”œâ”€â”€ presentation/   # Presentation layer (React components, hooks)
â”‚   â”‚   â”œâ”€â”€ components/ # Domain-specific React components
â”‚   â”‚   â”‚   â”œâ”€â”€ assets/  # Asset components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AssetActionDropdownMenu.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AssetThumbnail.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DomainTagEditor.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TagCreationOption.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TagEditorEmptyState.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TagSuggestionList.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ dialogs/ # Modal dialogs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AssetDetailsModal.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AssetSelectorModal.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ConfirmationDialog.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DeleteFolderDialog.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DialogShowcase.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderPickerDialog.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderTreeItem.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ InputDialog.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ NewFolderDialog.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RenameFolderDialog.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ folderPickerUtils.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderTreeRenderer.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useFolderPicker.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sections/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AssetDetailsHeader.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AssetPreviewSection.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoadingSpinner.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderFetcher.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ error/   # Error handling components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DamErrorBoundary.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderNotFoundHandler.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ filters/ # Filter components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreationDateFilter.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DamTagFilter.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OwnerFilter.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SizeFilter.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SizeFilterCustomView.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SizeFilterListView.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SortControl.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TypeFilter.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomDateRangePicker.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DateOptionsList.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useDateFilter.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DateFilterService.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ folders/ # Folder components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderListItem.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderThumbnail.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ gallery/ # Gallery components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AssetGalleryClient.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AssetGalleryRenderer.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AssetGridItem.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AssetListItem.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderItem.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GalleryDialogs.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GalleryLayout.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sections/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ContentSections.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EmptyState.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GalleryHeader.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UploadProgress.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation/ # Navigation components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DamBreadcrumbs.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderBreadcrumbs.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderNavigationItem.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderSidebar.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderActionsMenu.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderExpandButton.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderLink.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useFolderNavigation.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderTreeFetcher.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ search/  # Search components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DamSearchBar.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SavedSearchButton.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchDropdownMenu.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SavedSearchBrowseTab.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SavedSearchDialog.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SavedSearchList.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SavedSearchSaveTab.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchActions.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchCriteriaPreview.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchForm.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useSearchBarState.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SavedSearchHandler.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchInputHandler.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ upload/  # Upload components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AssetUploader.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DamUploadButton.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ workspace/ # Workspace layout
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DamWorkspaceView.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ WorkspaceFilters.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ WorkspaceHeader.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ DamDragDropProvider.tsx
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ hooks/       # Domain-specific React hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ assets/  # Asset-related hooks
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useAssetDetailsModal.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useAssetDragAndDrop.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useAssetGalleryHandlers.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useAssetGalleryState.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useAssetItemActions.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useAssetItemDialogs.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useAssetUpload.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ gallery/ # Gallery-related hooks
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useDamDragAndDrop.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useDamGalleryData.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useTagEditor.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation/ # Navigation-related hooks
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useDamPageHandlers.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useDamPageState.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useDamUrlManager.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useFolderNavigation.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useGalleryDialogs.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ search/  # Search-related hooks
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useDamFilters.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useDamSearchDropdown.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useDamSearchInput.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useDamTagFilterHandler.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useSavedSearches.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useTagFilter.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ services/ # Hook service utilities
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FilterActionsService.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FilterTypes.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GalleryDataService.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GalleryDataTypes.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TagEditorAuthService.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TagEditorComputationService.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TagEditorDataService.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TagEditorTypes.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UrlParameterService.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ types/       # Presentation layer types
â”‚   â”‚   â”‚   â””â”€â”€ interfaces.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ types/           # Domain-specific TypeScript types
â”‚   â”‚   â”œâ”€â”€ dam.types.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ index.ts         # Public API exports
â”œâ”€â”€ usecases/            # Use cases for other domains (pre-DDD)
â”‚   â””â”€â”€ tts/             # TTS business logic
â”œâ”€â”€ services/            # External service integrations
â”œâ”€â”€ schemas/             # Validation schemas
â”œâ”€â”€ auth/                # Authentication & authorization
â”œâ”€â”€ hooks/               # Custom React hooks (global)
â””â”€â”€ forms/               # Form utilities and validation
```

### ğŸ—„ï¸ Data & API Layer
```
app/api/                 # REST API endpoints
â”œâ”€â”€ dam/                 # DAM API routes
â”‚   â”œâ”€â”€ asset/           # Asset operations
â”‚   â”‚   â””â”€â”€ [assetId]/   # Individual asset operations
â”‚   â”œâ”€â”€ folders/         # Folder operations
â”‚   â”‚   â”œâ”€â”€ [folderId]/  # Individual folder operations
â”‚   â”‚   â”‚   â”œâ”€â”€ children/ # Folder children
â”‚   â”‚   â”‚   â””â”€â”€ path/    # Folder path
â”‚   â”‚   â””â”€â”€ tree/        # Folder tree
â”‚   â”œâ”€â”€ upload/          # File upload handling
â”‚   â”œâ”€â”€ route.ts         # Main DAM API endpoint
â”‚   â””â”€â”€ dam-api.types.ts # API type definitions
â”œâ”€â”€ team/                # Team management API
â”‚   â”œâ”€â”€ members/         # Team member operations
â”‚   â””â”€â”€ upload/          # Team file uploads
â”œâ”€â”€ profile/             # User profile API
â””â”€â”€ [other domains]/     # Other API endpoints
supabase/                # Database schema & edge functions
â”œâ”€â”€ functions/           # Supabase Edge Functions
â”‚   â”œâ”€â”€ _shared/         # Shared function utilities
â”‚   â”œâ”€â”€ admin-resend-invitation/
â”‚   â”œâ”€â”€ admin-reset-password/
â”‚   â”œâ”€â”€ complete-onboarding-membership/
â”‚   â”œâ”€â”€ invite-member/
â”‚   â””â”€â”€ set-active-org-claim/
â””â”€â”€ migrations/          # Database migrations
```

### ğŸ“š Documentation & Configuration
```
docs/                    # Comprehensive feature documentation
â”œâ”€â”€ DAM/                 # DAM feature docs and build steps
â”‚   â”œâ”€â”€ completed/       # âœ… Completed migration documentation
â”‚   â”‚   â”œâ”€â”€ DAM_Architecture_Overview.md
â”‚   â”‚   â”œâ”€â”€ component-organization-ddd-analysis.md
â”‚   â”‚   â”œâ”€â”€ creation-date-filter-refactor.md
â”‚   â”‚   â”œâ”€â”€ dam_actions_to_ddd_migration_build_steps.md
â”‚   â”‚   â”œâ”€â”€ dam_ddd_completion_checklist.md
â”‚   â”‚   â”œâ”€â”€ dam_ddd_component_migration_build_steps.md
â”‚   â”‚   â”œâ”€â”€ folder-not-found-error-fix.md
â”‚   â”‚   â”œâ”€â”€ folder-picker-dialog-refactor.md
â”‚   â”‚   â””â”€â”€ presentation-layer-ddd-assessment.md
â”‚   â”œâ”€â”€ memories/        # Historical documentation
â”‚   â””â”€â”€ DAM_Architecture_Overview.md # Current overview
â”œâ”€â”€ text-to-speech/      # TTS feature documentation
â”‚   â””â”€â”€ completed/       # Completed TTS docs
â”œâ”€â”€ refactor/            # Refactoring documentation
â”‚   â”œâ”€â”€ completed/       # âœ… Completed refactors
â”‚   â”‚   â”œâ”€â”€ dam-search-bar-refactor.md
â”‚   â”‚   â”œâ”€â”€ folder-navigation-item-refactor.md
â”‚   â”‚   â””â”€â”€ lib_layer_refactor_steps-done.md
â”‚   â””â”€â”€ folder-repository-refactor.md # Ongoing refactors
â”œâ”€â”€ multi-tenant/        # Multi-tenancy implementation
â”œâ”€â”€ roles/               # Role system documentation
â”œâ”€â”€ self-service-reporting/ # Reporting documentation
â”œâ”€â”€ team-members-completed/ # Team management docs
â”œâ”€â”€ supabase/            # Supabase-specific documentation
â”œâ”€â”€ starters/            # Starter templates
â”œâ”€â”€ playbook/            # Playbook documentation
â”œâ”€â”€ misc-docs/           # Miscellaneous documentation
â””â”€â”€ general/             # General platform documentation
    â””â”€â”€ quick-tips.md    # Development tips
```

### ğŸ› ï¸ Development Tools & Scripts
```
scripts/                 # Development scripts
â””â”€â”€ create-domain.js     # Domain creation utility

.cursor/                 # Cursor IDE configuration
â””â”€â”€ rules/               # Cursor rules for development
    â”œâ”€â”€ cursor_rules.mdc # Core development rules
    â”œâ”€â”€ golden-rule.mdc  # Golden development principles
    â”œâ”€â”€ project-structure.mdc # This file
    â””â”€â”€ self_improve.mdc # Self-improvement guidelines
```

## Quick Start Navigation

1. **New Feature**: Start in `app/(protected)/[feature]/`
2. **Reusable UI**: Check `components/ui/` first, then domain-specific components in `lib/[domain]/presentation/components/`
3. **Business Logic**: 
   - **DAM**: Use `lib/dam/` (Complete DDD structure)
   - **Other domains**: Check `lib/actions/` or `lib/usecases/`
4. **API Integration**: Check `lib/services/` or `app/api/`
5. **Database Changes**: Start in `supabase/migrations/`
6. **Documentation**: Check `docs/[domain]/` for feature-specific docs

## Domain-Specific Patterns

### DAM (Digital Asset Management) âœ… **FULLY MIGRATED TO DDD**
- **Complete Clean Architecture** implementation following DDD principles
- **Domain Layer**: `lib/dam/domain/` 
  - Entities with factories and validation
  - Repository interfaces
  - Domain services
  - Value objects
- **Application Layer**: `lib/dam/application/`
  - Use cases organized by feature (assets, folders, search, tags, common)
  - Application services
  - DTOs for data transfer
  - Server actions for Next.js integration
- **Infrastructure Layer**: `lib/dam/infrastructure/`
  - Supabase repository implementations
  - Data mappers
  - Infrastructure services (query builders, data processors)
  - Storage service implementations
- **Presentation Layer**: `lib/dam/presentation/`
  - React components organized by feature
  - Custom hooks with service utilities
  - Domain-specific types
  - Complete component hierarchy with proper separation
- **Public API**: `lib/dam/index.ts` (Centralized exports for clean imports)

### Text-to-Speech (TTS) ğŸ”„ Legacy Structure (Migration Planned)
- **Components**: `components/tts/`
- **Business Logic**: `lib/usecases/tts/` (use case pattern)
- **Service Integration**: `lib/services/elevenlabsService.ts`
- **Server Actions**: `lib/actions/tts.ts`

### Authentication & Authorization ğŸ”„ Legacy Structure (Migration Planned)
- **Middleware**: `lib/auth/middleware.ts`
- **Server Actions**: `lib/auth/server-action.ts`
- **Components**: `components/auth/`
- **Authorization Logic**: `lib/auth/authorization.ts`

### Team Management ğŸ”„ Legacy Structure (Migration Planned)
- **Components**: `components/team/`, `components/settings/`
- **Server Actions**: `lib/actions/team.ts`, `lib/actions/members.ts`
- **API Routes**: `app/api/team/`

### Notes System ğŸ”„ Legacy Structure (Migration Planned)
- **Components**: `components/notes/`
- **Page Logic**: `app/(protected)/documents/notes/` (âœ… Dynamic rendering fixed)
- **Types**: `types/notes.ts`

## File Naming Conventions

- **Components**: PascalCase (`AssetGallery.tsx`, `TtsInterface.tsx`)
- **Pages**: lowercase (`page.tsx`, `layout.tsx`)
- **Utilities**: camelCase (`folderPickerUtils.ts`, `ttsHistoryUtils.ts`)
- **Tests**: `.test.tsx` or `.test.ts`
- **Types**: `.types.ts`
- **Server Actions**: `[domain].actions.ts`
- **Use Cases**: `[UseCase]UseCase.ts`
- **Services**: `[Name]Service.ts`
- **Factories**: `[Entity]Factory.ts`
- **Mappers**: `[Entity]Mapper.ts`

## Best Practices Followed

âœ… **Co-located Tests**: Tests next to implementation  
âœ… **Feature Isolation**: Each domain is self-contained  
âœ… **Type Safety**: Comprehensive TypeScript usage  
âœ… **Clean Separation**: UI, business logic, and data layers separated  
âœ… **Documentation**: Extensive docs for complex features in `docs/`  
âœ… **Complete DDD in DAM**: Full domain-driven design implementation with all layers  
âœ… **Progressive Migration**: Gradual migration to DDD patterns following DAM blueprint  
âœ… **Dynamic Rendering**: Proper Next.js 15 dynamic rendering configuration  
âœ… **Barrel Exports**: Comprehensive `index.ts` files for clean imports  
âœ… **Service Layer**: Proper separation of concerns with service utilities  

## Migration Status & Future Plans

### âœ… Completed Migrations
- **DAM Domain**: âœ… **FULLY MIGRATED** to complete DDD architecture
  - All legacy `components/dam/` moved to `lib/dam/presentation/`
  - All legacy `lib/actions/dam/` moved to `lib/dam/application/actions/`
  - Complete domain, application, infrastructure, and presentation layers
  - Comprehensive use case organization by feature
  - Full service layer with proper separation of concerns
- **Multi-tenant Support**: Integrated across the platform
- **Role System**: Complete role-based access control
- **Team Management**: Full team member management system
- **Dynamic Rendering**: Fixed Next.js 15 dynamic rendering issues

### ğŸ”„ Planned DDD Migrations
The following domains are candidates for DDD migration using the DAM blueprint:

1. **Text-to-Speech (TTS)**
   - Current: Use case pattern in `lib/usecases/tts/`
   - Target: Full DDD with `lib/tts/domain|application|infrastructure|presentation/`

2. **Authentication & Authorization**
   - Current: Mixed in `lib/auth/`
   - Target: DDD structure with proper domain separation

3. **Team Management**
   - Current: Server actions and components
   - Target: DDD with team domain modeling

4. **Marketing Automation**
   - Current: Basic page structure
   - Target: Full CRM domain with DDD

5. **Reporting & Analytics**
   - Current: Basic implementation
   - Target: Analytics domain with DDD

6. **Notes System**
   - Current: Components and page logic
   - Target: DDD with document domain modeling

## Areas for Future Enhancement

Consider these optimizations as the codebase grows:

- **Complete DDD Migration**: Migrate remaining domains to DDD structure using DAM as blueprint
- **Component Library**: Formalize the component system with Storybook
- **E2E Tests**: Add Playwright/Cypress tests in a dedicated `e2e/` folder
- **API Documentation**: Generate API docs from the growing API layer
- **Performance Monitoring**: Add performance tracking for the growing feature set
- **Cross-Domain Types**: Consolidate shared types across domains
- **Domain Events**: Implement domain events for cross-domain communication

---

*This structure demonstrates a mature DDD implementation in the DAM domain, providing a clear blueprint for migrating other domains. The architecture supports both rapid feature development and long-term maintainability with enterprise-level organization.*